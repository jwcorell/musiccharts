#!/usr/bin/env python3
import re

ALL_MARGINS = 0.25  # In inches
ALL_FONT_SIZES = [
    8,
    8.5,
    9,
    9.5,
    10,
    10.5,
    11,
    11.5,
    12,
    12.5,
    13,
    13.5,
    14,
    14.5,
    15,
    15.5,
    16,
    16.5,
    17,
    17.5,
    18,
    18.5,
    19,
    19.5,
    20,
]
BASE_FONT_SIZE = 14  # In points
SUPERSCRIPT_RAISE = 0.75
SUPERSCRIPT_SCALER = 0.75
SUPERSCRIPT_FILLER_SCALER = (1 - SUPERSCRIPT_SCALER) / SUPERSCRIPT_SCALER
TITLE_SIZE = 20  # In points
TITLE_FONT = "Futura"

# Regex compilation for chart formatting
CHORD_REGEX1 = re.compile(r"(^|\n| )([#b]?)(\d)([0-9susb#+-oø△/]*)( |$|\n|\))")
CHORD_REGEX2 = re.compile(r"/([#b]?)([0-9])( |$|\n|\))")
CHORD_REGEX3 = re.compile(r"/([#b]?)([8-9])( |$|\n|\))")
INTRO_REGEX = re.compile(r"(?:Intro|Intro/Interlude|Intro/Outro):")
LABEL_REGEX = re.compile(
    r"(?:Bridge|Chorus|Interlude|Outro|Prechorus|Tag|Verse|Ending)\s?[0-9]?:"
)
TITLE_REGEX = re.compile(r"(^Title{)([^}]*)(})(.*)")

# Predefine chords per-key for transposition
CHORDS = {}
CHORDS["NNS"] = {
    "1": "1",
    "#1": "#1",
    "b2": "b2",
    "2": "2",
    "#2": "#2",
    "b3": "b3",
    "3": "3",
    "4": "4",
    "#4": "#4",
    "b5": "b5",
    "5": "5",
    "#5": "#5",
    "b6": "b6",
    "6": "6",
    "#6": "#6",
    "b7": "b7",
    "7": "7",
}
CHORDS["A"] = {
    "1": "A",
    "#1": "A#",
    "b2": "Bb",
    "2": "B",
    "#2": "C",
    "b3": "C",
    "3": "C#",
    "4": "D",
    "#4": "D#",
    "b5": "Eb",
    "5": "E",
    "#5": "F",
    "b6": "F",
    "6": "F#",
    "#6": "G",
    "b7": "G",
    "7": "G#",
}
CHORDS["A#"] = {
    "1": "A#",
    "#1": "B",
    "b2": "B",
    "2": "C",
    "#2": "C#",
    "b3": "Db",
    "3": "D",
    "4": "D#",
    "#4": "E",
    "b5": "E",
    "5": "F",
    "#5": "F#",
    "b6": "Gb",
    "6": "G",
    "#6": "G#",
    "b7": "Ab",
    "7": "A",
}
CHORDS["Bb"] = {
    "1": "Bb",
    "#1": "B",
    "b2": "B",
    "2": "C",
    "#2": "C#",
    "b3": "Db",
    "3": "D",
    "4": "D#",
    "#4": "E",
    "b5": "E",
    "5": "F",
    "#5": "F#",
    "b6": "Gb",
    "6": "G",
    "#6": "G#",
    "b7": "Ab",
    "7": "A",
}
CHORDS["B"] = {
    "1": "B",
    "#1": "C",
    "b2": "C",
    "2": "C#",
    "#2": "D",
    "b3": "D",
    "3": "D#",
    "4": "E",
    "#4": "F",
    "b5": "F",
    "5": "F#",
    "#5": "G",
    "b6": "G",
    "6": "G#",
    "#6": "A",
    "b7": "A",
    "7": "A#",
}
CHORDS["C"] = {
    "1": "C",
    "#1": "C#",
    "b2": "Db",
    "2": "D",
    "#2": "D#",
    "b3": "Eb",
    "3": "E",
    "4": "F",
    "#4": "F#",
    "b5": "Gb",
    "5": "G",
    "#5": "G#",
    "b6": "Ab",
    "6": "A",
    "#6": "A#",
    "b7": "Bb",
    "7": "B",
}
CHORDS["C#"] = {
    "1": "C#",
    "#1": "D",
    "b2": "D",
    "2": "D#",
    "#2": "E",
    "b3": "E",
    "3": "F",
    "4": "F#",
    "#4": "G",
    "b5": "G",
    "5": "G#",
    "#5": "A",
    "b6": "A",
    "6": "A#",
    "#6": "B",
    "b7": "B",
    "7": "C",
}
CHORDS["Db"] = {
    "1": "Db",
    "#1": "D",
    "b2": "D",
    "2": "Eb",
    "#2": "E",
    "b3": "E",
    "3": "F",
    "4": "Gb",
    "#4": "G",
    "b5": "G",
    "5": "Ab",
    "#5": "A",
    "b6": "A",
    "6": "Bb",
    "#6": "B",
    "b7": "B",
    "7": "C",
}
CHORDS["D"] = {
    "1": "D",
    "#1": "D#",
    "b2": "Eb",
    "2": "E",
    "#2": "F",
    "b3": "F",
    "3": "F#",
    "4": "G",
    "#4": "G#",
    "b5": "Ab",
    "5": "A",
    "#5": "A#",
    "b6": "Bb",
    "6": "B",
    "#6": "C",
    "b7": "C",
    "7": "C#",
}
CHORDS["D#"] = {
    "1": "D#",
    "#1": "E",
    "b2": "E",
    "2": "F",
    "#2": "F#",
    "b3": "Gb",
    "3": "G",
    "4": "Ab",
    "#4": "A",
    "b5": "A",
    "5": "A#",
    "#5": "B",
    "b6": "B",
    "6": "C",
    "#6": "C#",
    "b7": "Db",
    "7": "D",
}
CHORDS["Eb"] = {
    "1": "Eb",
    "#1": "E",
    "b2": "E",
    "2": "F",
    "#2": "F#",
    "b3": "Gb",
    "3": "G",
    "4": "Ab",
    "#4": "A",
    "b5": "A",
    "5": "Bb",
    "#5": "B",
    "b6": "B",
    "6": "C",
    "#6": "C#",
    "b7": "Db",
    "7": "D",
}
CHORDS["E"] = {
    "1": "E",
    "#1": "F",
    "b2": "F",
    "2": "F#",
    "#2": "G",
    "b3": "G",
    "3": "G#",
    "4": "A",
    "#4": "A#",
    "b5": "Bb",
    "5": "B",
    "#5": "C",
    "b6": "C",
    "6": "C#",
    "#6": "D",
    "b7": "D",
    "7": "D#",
}
CHORDS["F"] = {
    "1": "F",
    "#1": "F#",
    "b2": "Gb",
    "2": "G",
    "#2": "G#",
    "b3": "Ab",
    "3": "A",
    "4": "Bb",
    "#4": "B",
    "b5": "B",
    "5": "C",
    "#5": "C#",
    "b6": "Db",
    "6": "D",
    "#6": "D#",
    "b7": "Eb",
    "7": "E",
}
CHORDS["F#"] = {
    "1": "F#",
    "#1": "G",
    "b2": "G",
    "2": "G#",
    "#2": "A",
    "b3": "A",
    "3": "A#",
    "4": "B",
    "#4": "C",
    "b5": "C",
    "5": "C#",
    "#5": "D",
    "b6": "D",
    "6": "D#",
    "#6": "E",
    "b7": "E",
    "7": "F",
}
CHORDS["Gb"] = {
    "1": "Gb",
    "#1": "G",
    "b2": "G",
    "2": "Ab",
    "#2": "A",
    "b3": "A",
    "3": "Bb",
    "4": "B",
    "#4": "C",
    "b5": "C",
    "5": "Db",
    "#5": "D",
    "b6": "D",
    "6": "Eb",
    "#6": "E",
    "b7": "E",
    "7": "F",
}
CHORDS["G"] = {
    "1": "G",
    "#1": "G#",
    "b2": "Ab",
    "2": "A",
    "#2": "A#",
    "b3": "Bb",
    "3": "B",
    "4": "C",
    "#4": "C#",
    "b5": "Db",
    "5": "D",
    "#5": "D#",
    "b6": "Eb",
    "6": "E",
    "#6": "F",
    "b7": "F",
    "7": "F#",
}
CHORDS["G#"] = {
    "1": "G#",
    "#1": "A",
    "b2": "A",
    "2": "A#",
    "#2": "B",
    "b3": "B",
    "3": "C",
    "4": "C#",
    "#4": "D",
    "b5": "D",
    "5": "D#",
    "#5": "E",
    "b6": "E",
    "6": "F",
    "#6": "F#",
    "b7": "Gb",
    "7": "G",
}
CHORDS["Ab"] = {
    "1": "Ab",
    "#1": "A",
    "b2": "A",
    "2": "Bb",
    "#2": "B",
    "b3": "B",
    "3": "C",
    "4": "Db",
    "#4": "D",
    "b5": "D",
    "5": "Eb",
    "#5": "E",
    "b6": "E",
    "6": "F",
    "#6": "F#",
    "b7": "Gb",
    "7": "G",
}
